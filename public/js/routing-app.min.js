/* routing-app 11-11-2014 */
$(document).ready(function(){function a(){var a=0,b={center:{lat:51.4988,lng:-.174877},zoom:16},d=new google.maps.Map(document.getElementById("map-canvas"),b);google.maps.event.addListener(d,"click",function(b){var e=a++,f=new google.maps.Marker({position:b.latLng,map:d,index:e});0==f.index&&f.setAnimation(google.maps.Animation.BOUNCE),c[e]=f,$("#instructions").text("Select points of interest"),console.log(c),google.maps.event.addListener(f,"click",function(){0==f.index?$("#instructions").text("Cannot delete starting position!"):(f.setMap(null),delete c[f.index],$("#instructions").text("Select points of interest"),console.log(c))})})}function b(){for(var a=Object.keys(c).sort(),b=c[0].getPosition(),d=b.lat(),e=b.lng(),f={lat:d,lng:e},g=f,h=[],i=1;i<a.length;i++){var j=c[a[i]].getPosition();h.push({lat:j.lat(),lng:j.lng()})}return{origin:f,destination:g,waypoints:h}}var c={};google.maps.event.addDomListener(window,"load",a),$("#button a").click(function(){console.log("Getting your route..."),console.log(b())})});